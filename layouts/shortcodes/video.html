{{ $src := .Get "src" }}
{{ $width := .Get "width" | default "100%" }}
{{ $height := .Get "height" | default "auto" }}
{{ $controls := .Get "controls" | default "true" }}
{{ $autoplay := .Get "autoplay" | default "false" }}
{{ $loop := .Get "loop" | default "false" }}
{{ $muted := .Get "muted" | default "false" }}

{{ $videoURL := "" }}
{{ if (hasPrefix $src "http") }}
  {{ $videoURL = $src }}
{{ else if (hasPrefix $src "/") }}
  {{ $videoURL = $src | absURL }}
{{ else }}
  <!-- 相對路徑處理 -->
  {{ $currentPage := .Page }}
  {{ $currentDir := path.Dir $currentPage.File.Path }}
  {{ $videoPath := printf "%s/%s" $currentDir $src }}
  {{ $videoURL = $videoPath | absURL }}
{{ end }}

<div class="video-container">
  <video 
    {{ if eq $controls "true" }}controls{{ end }}
    {{ if eq $autoplay "true" }}autoplay{{ end }}
    {{ if eq $loop "true" }}loop{{ end }}
    {{ if eq $muted "true" }}muted{{ end }}
    style="width: {{ $width }}; height: {{ $height }}; max-width: 100%;">
    <source src="{{ $videoURL }}" type="video/mp4">
    <source src="{{ $videoURL }}" type="video/webm">
    <source src="{{ $videoURL }}" type="video/ogg">
    您的瀏覽器不支持視頻播放。
  </video>
</div>